import{G as h,j as r,c as j,a as c,b as f,r as x,N as m}from"./index-Cl3LxyGZ.js";import{u as p}from"./movie-storage-BHyttxnt.js";function L(t){return h({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"},child:[]}]})(t)}const N=t=>(t??0)/10,I=({rating:t})=>{const s=N(t??0);return r.jsx("span",{className:"stars-rating-container",children:Array.from({length:5}).map((n,a)=>{const e=(a+1)/5<=s;return r.jsx(L,{className:"star-rating",fill:e?"gold":"#D6DBDF","data-testid":`star-${e?"fill":"empty"}`},`${t}-star-icon-${a}-${n}`)})})},g=t=>{if(t==null)return null;try{return JSON.parse(t)}catch{return t}},u=t=>({updateStorage:t.updateStorage,initializeItem:t.initializeItem,removeItem:t.removeItem,clearStorage:t.clearStorage}),o=(t,s)=>{s==null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(s))},v=()=>{const t={};return Object.values(c).forEach(s=>{const n=localStorage.getItem(s);n&&(t[s]=g(n))}),t},D=(t,s)=>{const n=a=>{const e=a.key,i=a.newValue;e===null?t(l=>u(l),!0):Object.values(c).includes(e)&&s()[e]!==i&&t({[e]:g(i)})};addEventListener("storage",n)},d=j()((t,s)=>{const n=v();return D(t,s),{...n,updateStorage:(a,e)=>{o(a,e),t(()=>({[a]:e}))},initializeItem:(a,e)=>{s()[a]||(o(a,e),t(()=>({[a]:e})))},removeItem:a=>{localStorage.removeItem(a),t(()=>({[a]:void 0}))},clearStorage:()=>{localStorage.clear(),t(a=>u(a),!0)}}}),w=()=>{const t=f(),{movies:s}=p(),n=d(l=>l.updateStorage),a=d(l=>l.movieDetail),e=x.useMemo(()=>{const l=s.find(S=>S.slug===(t==null?void 0:t.id));return l&&n(c.movieDetail,l),(a==null?void 0:a.slug)===(t==null?void 0:t.id)?a:l},[t==null?void 0:t.id]),i=new Date(e==null?void 0:e.released_on);return e?r.jsxs("div",{className:"movie-datail-card",children:[r.jsx("div",{className:"movie-poster",children:r.jsx("img",{loading:"lazy",src:e==null?void 0:e.poster,alt:`poster ${e==null?void 0:e.title}`})}),r.jsxs("div",{className:"movie-details",children:[r.jsxs("div",{className:"movie-title-group",children:[r.jsxs("div",{className:"movie-title",children:[r.jsx("h2",{children:e==null?void 0:e.title})," ",e==null?void 0:e.classification]}),r.jsx(I,{rating:e==null?void 0:e.imdb_rating})]}),r.jsxs("div",{children:[r.jsxs("span",{children:["year ",i.getFullYear()]})," | ",r.jsxs("span",{children:["length "," ",e==null?void 0:e.length]})," | ",r.jsxs("span",{children:["director ",e==null?void 0:e.director]})]}),r.jsxs("div",{children:[r.jsxs("span",{children:["cast:"," "]}),e==null?void 0:e.cast.join(", ")]}),r.jsxs("div",{className:"movie-description",children:["Movie Description ",e==null?void 0:e.overview]})]})]}):r.jsx(m,{})};export{w as default};
